# py語初級文法

## 0. はじめに

このドキュメントでは、初めてプログラミングを学ぶ人のためにPythonの基本文法について解説します。

Pythonで書いたプログラム（ソースコード）は、「インタプリタ」と呼ばれるソフトウェアが命令を一つづつ読み取り実行することで動きます。以下の各章では、インタプリタの動作の規則を説明し、インタプリタになったつもりでプログラムを「実行」することを通してプログラミングの基本を学んでいきます。

各回の最初には、「目標となるコード」を示します。その回の内容を理解したら、目標となるコードがどのように実行されるか、自分で追ってみましょう。

## 1. 逐次実行

### 1.1. 第1回 文字列をつくる

今回の目標は、次の式 `"こんにちは"` をインタプリタの気持ちで「評価」することです。

#### 1.1.1. 「値」

「値」とは、コンピュータが取り扱い、覚えておくことのできるデータのことです。たとえば、人の名前のデータは、文字の並びである「文字列」という種類の値として取り扱うことになります。

このドキュメントでは、今後文字列値のことを 文字列の「こんにちは」 のような表記法で表すことにします。後述の「式」との違いに注意してください。

今回で取り扱う「値」の例です：

- *文字列「宇田まなと」*
- *文字列「三村みむ」*

また、後の章で異なる種類の値を取り扱いますが、それらについても同様の表記法を用います。

#### 1.1.2. 「式」

「式」は、ソースコードの中で、「値」を得るために書くもののことです。インタプリタが「式」を決められたルールに従って計算し、「値」を得ることを「評価する」といいます。

このドキュメントでは式を書くときには、`1+1`や`"こんにちは"`のように、インラインコードの形で書くことにします。

今後、新しい種類の式を紹介する際には、その式をプログラムに書く方法と、その式を評価して値を得るためのルールを説明します。

#### 1.1.3. 式の種類 - 文字列リテラル

文字列リテラルは、評価をするとすぐに文字列値が得られる式のことです。

**式の書き方**

文字列リテラルは、`"`（ダブルクォーテーション）で囲むことで書きます。

例：

- `"こんにちは"`
- `"宇田まなと"`
- `"三村みむ"`

**評価のルール**

文字列リテラルを評価するときには、`"`で囲まれた部分を原則そのまま文字列値として得ます。（「エスケープシーケンス」と呼ばれる特殊な書き方の部分がありますが、これは後で説明します。）

#### 1.1.4. 練習問題 - 文字列リテラルの評価

次の式を評価して、得られる値を答えてください。

例： `"こんにちは"` を評価すると、得られる値は *文字列「こんにちは」* です。

1. `"宇田まなと"`
2. `"三村みむ"`

### 1.2 第2回 挨拶をする

今回の目標は、以下のコードを理解し、インタプリタの気持ちになって実行することです：

```python
# 定型ツイート
print("水を飲みます")
print("水を飲みました")
print("ウ考寝 そ無練しぽ")
```

#### 1.2.1. 「コメント」

Pythonのソースコードの中で、`#` から始まる行は「コメント」と呼ばれます。プログラムを実行する際、コメントは無視します。

実際のプログラミングでは、そのプログラムを読む人のためにメモ書きとして用いることが多いです。

```python
# 実行時、この部分はコメントですので無視します。
print("水を飲みます")  # 「文」の後ろに # を付けた場合、それ以降行末までの部分も無視します
```

#### 1.2.2. 「文」

「文」は、Pythonのソースコードの中で改行で区切られる命令部分のことです。このドキュメントでは、文は章頭の例のようにコードブロックの形で書いたり、文中ではインラインコードで書くことにします。

ソースコードの中に文が複数ある場合は、原則上から順に実行されます。

今後、文の種類を紹介する際には、その文をプログラムに書く方法と、その文を実行するためのルールを説明します。

#### 1.2.3. 「文」の種類 - print文（文字列を出力するための文）

print文は、文字列値を画面に表示するための命令です。

**文の書き方**

出力したい文字列値が結果として出てくる式を print の後に丸括弧で囲んで書きます。たとえば、「こんにちは」という文字列を出力したいときには、次のようなコードを書くことになります：

```python
print("こんにちは")
```

ここで、printに渡す式のことを「引数」と呼びます。

**実行のルール**
print文を実行するときには、

- (1) 与えられた式（引数）を評価します。
- (2) 得られた値と改行文字を出力します。

上で挙げたコードは、次のように実行します：

- `print("こんにちは")` という文を実行します：
  - (1) 引数 `"こんにちは"` を評価します。
    - これは文字列リテラルという種類の式でした。1.1.3.の評価のルールに従って、値 *文字列「こんにちは」* を得ます。
  - (2) 得られた値 *文字列「こんにちは」* と改行文字を出力します。

最終的に、次のような出力が得られます：

```txt
こんにちは
```

#### 1.2.4. 複数の文を実行する

ソースコードの中に複数の文がある場合は、上から順に一つづつ実行します。最後の文まで実行したら、プログラムを終了します。

例：

```python
print("話しても")
print("いいです")
```

インタプリタは、このコードを次のように実行します：

- 1行目の `print("話しても")` という文を実行します：
  - print文は、引数の式を評価し、その結果を出力します。
  - (1) 引数 `"話しても"` を評価します。
    - これは文字列リテラルという種類の式でした。1.1.3.の評価のルールに従って、値 *文字列「話しても」* を得ます。
  - (2) 得られた値 *文字列「話しても」* と改行文字を出力します。
- 2行目の `print("いいです")` という文を実行します：
  - print文は、引数の式を評価し、その結果を出力します。
  - (1) 引数 `"いいです"` を評価します。
    - これは文字列リテラルという種類の式でした。1.1.3.の評価のルールに従って、値 *文字列「いいです」* を得ます。
  - (2) 得られた値 *文字列「いいです」* と改行文字を出力します。

最終的に、次のような出力が表示されることになります：

```txt
話しても
いいです
```

#### 1.2.5. 練習問題 - print文の実行

ここまで説明したルールを使って、インタプリタになったつもりで以下のコードを「実行」してみてください：

```python
print("水を飲みます")
print("水を飲みました")
print("ウ考寝 そ無練しぽ")
```

最終的な出力はどうなりましたか？

### 1.3. 第3回 値を記憶する

今回の目標は、以下のコードを理解し、インタプリタの気持ちになって実行することです：

```python
x = "うだ"
y = "まなと"
x = y
y = x
print(x)
print(y)
```

#### 1.3.1. 「変数」

「変数」は、値を書き込んで記憶しておくための名前付きの箱です。変数の名前として、Pythonでは 英字・アンダースコア（_）・数字を使うことができます（先頭は数字以外である必要があります）。

コードを実行する際には、それぞれの変数に入っている値を記憶しておきます。たとえば、変数に値を書き込んだ後だと、記憶は次のようになります：

- 変数 `x`
  - 値 *文字列「うだ」* が入っている
- 変数 `y`
  - 値 *文字列「まなと」* が入っている
- 変数 `z`
  - 値 *文字列「まなみ」* が入っている

プログラムの実行を始めたときには、変数を何も記憶していない状態から始まります。

この節の前半では、変数を作ったり、その中に値を入れたりする方法を学びます。

#### 1.3.2. 「文」の種類 - 代入文（変数に値を入れるための文）

代入文は、変数に値を入れるための文です。

**文の書き方**
代入文は `変数の名前 = 式` の形で書きます。

たとえば、変数 `x` に式 `"こんにちは"` の結果を書き込みたいときには、以下のようなコードを書きます：

```python
x = "こんにちは"
```

`=` の左側に書かれた変数の名前の方を「左辺」、`=` の右側に書かれた式の方を「右辺」と呼びます。

**実行のルール**
代入文を実行するときには：

- (1) 右辺の式を評価します。
- (2) 左辺の変数の名前があるか記憶を確認し、次のようにします：
  - (2-既存) その名前の変数がもうある場合は、変数の値を(1)で得た値に書き換えます。
  - (2-新規) その名前の変数がまだない場合は、新しい変数を作り、そこに(1)で得た値を書き込みます。

たとえば、次のような1文からなるコードを実行してみます：

```python
x = "おはよう"
```

- （いま、インタプリタは何の変数も覚えていません）
- 1行目の `x = "おはよう"` という文を実行します：
  - (1) 引数 `"おはよう"` を評価します。
    - これは文字列リテラルという種類の式でした。1.1.3.の評価のルールに従って、値 *文字列「おはよう」* を得ます。
  - (2) 左辺の変数 `x` の名前を確認します。
    - その名前の変数はまだありません。
    - (2-新規) 新しい変数 `x` を作り、そこに(1)で得た値 *文字列「おはよう」* を書き込みます。
- （いま、インタプリタは 変数`x`に*文字列「おはよう」* が入っていることをを覚えています）

#### 1.3.3. 変数の書き換え

すでに値が入っている変数に値を書き込もうとすると、今までの値は忘れて新しい値に書き換えられます。

たとえば、次のようなコードを実行してみます：

```python
x = "おはよう"
x = "こんにちは"
```

- （いま、インタプリタは何の変数も覚えていません）
- 1行目の `x = "おはよう"` という文を実行します：
  - (1) 引数 `"おはよう"` を評価します。
    - これは文字列リテラルという種類の式でした。1.1.3.の評価のルールに従って、値 *文字列「おはよう」* を得ます。
  - (2) 左辺の変数 `x` の名前を確認します。
    - その名前の変数がまだありません
    - (2-新規) 新しい変数 `x` を作り、そこに(1)で得た値 *文字列「おはよう」* を書き込みます。
- （いま、インタプリタは 変数`x`に*文字列「おはよう」* が入っていることをを覚えています）
- 2行目の `x = "こんにちは"` という文を実行します：
  - (1) 引数 `"こんにちは"` を評価します。
    - これは文字列リテラルという種類の式でした。1.1.3.の評価のルールに従って、値 *文字列「こんにちは」* を得ます。
  - (2) 左辺の変数 `x` の名前を確認します。
    - その名前の変数がすでにあります。（ *文字列「おはよう」* が入っていますが、この値は忘れてしまいます）
    - (2-既存) 変数 `x` の値を(1)で得た値 *文字列「こんにちは」* に書き換えます。
- （いま、インタプリタは 変数`x`に*文字列「こんにちは」* が入っていることをを覚えています）

#### 1.3.4. 練習問題 - 変数の書き換え

次のコードをインタプリタになったつもりで実行してみてください：

```python
x = "おはよう"
y = "うだ"
y = "まなと"
x = "こんにちは"
```

最後まで実行したとき、インタプリタの記憶には何が入っていますか？

#### 1.3.5. 式の種類 - 変数参照（覚えた値を利用する）

変数参照は、変数に入っている値を取り出すための式です。

**式の書き方**

コード中に変数の名前をそのまま書きます。たとえば、変数 x の値を取り出したければ `x` と書きます。

**評価のルール**

変数参照を評価するときには、記憶にその変数があるかどうか調べ、そこに入っている値を結果として得ます。（その名前の変数がない場合、エラーになります）

たとえば、次のようなコードを実行してみます：

```python
x = "おはよう"
print(x)
```

実行の流れは次のようになります：

- （いま、インタプリタは何の変数も覚えていません）
- 1行目の `x = "おはよう"` という文を実行します：
  - (1) 引数 `"おはよう"` を評価します。
    - これは文字列リテラルという種類の式でした。1.1.3.の評価のルールに従って、値 *文字列「おはよう」* を得ます。
  - (2) 左辺の変数 `x` の名前を確認します。
    - その名前の変数がまだありません
    - (2-新規) 新しい変数 `x` を作り、そこに(1)で得た値 *文字列「おはよう」* を書き込みます。
- （いま、インタプリタは 変数`x`に*文字列「おはよう」* が入っていることをを覚えています）
- 2行目の `print(x)` という文を実行します：
  - (1) 引数 `x` を評価します。
    - この式が変数参照です。1.3.5.の評価のルールに従って、変数 `x` の名前を調べます。
    - 変数 `x` の中身は *文字列「おはよう」* でした。その値 *文字列「おはよう」* を結果として得ます。
  - (2) 得られた値 *文字列「おはよう」* と改行文字を出力します。


#### 1.3.6. 練習問題 - 変数参照と複雑な代入

次のコードをインタプリタになったつもりで実行してみてください：

```python
x = "うだ"
y = "まなと"
x = y
y = x
print(x)
print(y)
```

最終的に、インタプリタの記憶には何が入っていますか？また、出力はどうなりましたか？

### 1.4. 第4回 演算をする

今回の目標は、以下のコードを理解し、インタプリタの気持ちになって実行することです：

```python
uda = "うだ"
manato = "まなと"
manami = "まなみ"

udmnt = uda + manato
udmnm = uda + manami

print(udmnt)
print(udmnm)
```

#### 1.4.1. 式の種類 - 演算式（値を計算するための式）

演算式は、値を計算するための式です。たとえば、「文字列をくっつけたい」「数値に対して加減乗除をしたい」というときには、演算式を使うことになります。

**式の書き方**

演算式は、`引数1 演算子 引数2` というふうに書きます。

用いる演算子は、行いたい演算の種類によって異なります。たとえば、文字列を結合するための演算子は `+` です。

```python
x = "うだ"
y = "まなと"
z = x + y
```

**評価のルール**

演算式を評価するときには、次のようにします：